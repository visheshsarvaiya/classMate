"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.publicUrlResolver = publicUrlResolver;
exports.generatePublicUrlFieldConfig = generatePublicUrlFieldConfig;
const url_generator_1 = require("../utils/url-generator");
const dispatchers_1 = require("../jobs/dispatchers");
function publicUrlResolver(source, actions, store) {
    if ((0, dispatchers_1.shouldDispatch)()) {
        (0, dispatchers_1.dispatchLocalFileServiceJob)({
            url: source.url,
            filename: source.filename,
            contentDigest: source.internal.contentDigest,
        }, actions, store);
    }
    return (0, url_generator_1.generateFileUrl)({ url: source.url, filename: source.filename }, store);
}
function generatePublicUrlFieldConfig(actions, store) {
    return {
        type: `String!`,
        resolve(source) {
            return publicUrlResolver(source, actions, store);
        },
    };
}
//# sourceMappingURL=public-url-resolver.js.map